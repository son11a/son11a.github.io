<!DOCTYPE html>

<html lang="fi">

<head>

  <title>JSON Example</title>  

  <meta charset="utf-8">

  <meta name="viewport" content="width=device-width, initial-scale=1">

<style>
   
    
    .topnav {
      overflow: hidden;
      background-color: #333;
    }
    
    .topnav a {
      float: left;
      color: #f2f2f2;
      text-align: center;
      padding: 14px 16px;
      text-decoration: none;
      font-size: 17px;
    }
    
    .topnav a:hover {
      background-color: #ddd;
      color: black;
    }
    
    .topnav a.active {
      background-color: #04AA6D;
      color: white;
    }
    </style>


  </head>

<body>

    <div class="topnav">
        <a href="index.html">Kurssi</a>
        <a href="toteutus.html">Toteutus</a>
        <a  href="tapahtumat.html">Tapahtumat</a>
        <a class="active" href="liikennekamera.html">Liikennekamera</a>
      </div>

<h1>Liikennekamera</h1>

 <div id="vastaus"></div>


<script>

    
Promise.all([
  fetch('https://tie.digitraffic.fi/api/weathercam/v1/stations/C04507').then(response => response.json()),
  fetch('https://tie.digitraffic.fi/api/weathercam/v1/stations/C04507/data').then(response => response.json())   
])
.then(([data1, data2]) => {
    tapahtumat(data1, data2)
})
.catch(error => console.log('Error:', error));

function tapahtumat (data1, data2){

    var teksti = "";
    
    for (var i = 0; i < data1.properties.presets.length; i++){

    teksti = teksti + data2.dataUpdatedTime + "<br>" + "<img src=" + data1.properties.presets[i].imageUrl + ">" + "<br>";

    }

    document.getElementById("vastaus").innerHTML = teksti;

    
}

</script>

<div> 
  Liikennetietojen lähde Fintraffic / digiraffic.fi lisenssi CC 4.0 BY
</div>


      </body>
      </html>